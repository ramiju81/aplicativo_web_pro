<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cloud Medical Fees mySiss</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --mysiss-purple: #800080;
            --mysiss-light-purple: #EBE3F2;
            --mysiss-hover-purple: #DFD1EE;
            --mysiss-active-bg: #D0B8E6;
        }
        .custom-radio {
            accent-color: var(--mysiss-purple);
        }
        .focus-outline:focus-visible {
            outline: 2px solid var(--mysiss-purple);
            outline-offset: 2px;
        }
        /* Estilos para el sidebar */
        .submenu {
            display: none;
            padding-left: 1rem;
        }
        .submenu.active {
            display: block;
        }
        .nav-link.active {
            background-color: var(--mysiss-active-bg);
            font-weight: bold;
            position: relative;
        }
        .nav-link.active::after {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background-color: var(--mysiss-purple);
        }
        .rotate-180 {
            transform: rotate(180deg);
        }
        /* Estilo para el contenedor del menú */
        nav {
            display: flex;
            flex-direction: column;
            height: calc(100% - 80px); /* Ajustar según altura del logo */
            position: relative;
        }
        /* Estilo para el enlace de cerrar sesión */
        .logout-link {
            margin-top: auto; /* Empuja el enlace hacia abajo */
            position: sticky;
            bottom: 0;
            background-color: var(--mysiss-light-purple);
            padding-top: 10px;
            padding-bottom: 10px;
        }
		
		/* Botón rojo fijo en esquina inferior derecha */
		#devClearBtn {
			position: fixed;
			bottom: 20px;
			right: 20px;
			background: red;
			color: white;
			border: none;
			padding: 10px;
			border-radius: 5px;
			cursor: pointer;
			z-index: 9999;
		}
		</style>
</head>
<body class="flex h-screen w-full overflow-hidden">
   <!-- Sidebar -->
    <div class="w-48 h-full bg-[var(--mysiss-light-purple)] flex flex-col">
        <div class="p-6">
            <h1 class="text-[var(--mysiss-purple)] text-5xl font-bold">mySiss</h1>
        </div>
		<nav class="mt-4 flex flex-col" aria-label="Menú principal">
			<!-- Configuración -->
			<div class="menu-item">
				<a href="#" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline flex justify-between items-center" onclick="toggleSubmenu('config-submenu', this)">
					<strong>Configuración</strong>
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
					</svg>
				</a>
				<div id="config-submenu" class="submenu">
					<a href="conf_bas_1.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Base</a>
					<a href="conf_func_1.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Funcionalidad</a>
					<a href="conf_func_3.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Funcionalidad New</a>
					<a href="conf_role.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Crear Roles</a>
					<a href="../Honorarios/configuracion.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Conf. Honorarios</a>
				</div>
			</div>
			
			<!-- Usuario -->
			<div class="menu-item">
				<a href="#" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline flex justify-between items-center" onclick="toggleSubmenu('usuario-submenu', this)">
					<strong>Usuario</strong>
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
					</svg>
				</a>
				<div id="usuario-submenu" class="submenu">
					<a href="conf_usua_1.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Crear Usuario</a>
					<a href="conf_rol.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Asignar Rol</a>
				</div>
			</div>
			
			<!-- Módulos -->
			<div class="menu-item">
				<a href="#" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline flex justify-between items-center" onclick="toggleSubmenu('modulos-submenu', this)">
					<strong>Módulos</strong>
					<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
					</svg>
				</a>
				<div id="modulos-submenu" class="submenu">
					<a href="../Honorarios/Honorarios.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Honorarios</a>
					<a href="../glosas/glosas.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Glosas</a>
					<a href="../auditoria/auditoria.html" class="nav-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline block">Auditoria</a>
				</div>
			</div>

			<a href="../login.html" class="nav-link logout-link py-2 px-6 text-[var(--mysiss-purple)] hover:bg-[var(--mysiss-hover-purple)] transition-colors focus-outline">
				<strong>Cerrar Sesión</strong>
			</a>
		</nav>
    </div>

    <!-- Contenido principal -->
    <div class="flex-1 bg-white p-8 overflow-auto">
        <!-- Contenido de la página -->
    </div>
	<!--
	<button id="devClearBtn">Limpiar</button>
	-->
<script>
// Esta función ahora solo manejará el cierre de otros menús cuando se abre uno nuevo
function toggleSubmenu(submenuId, linkElement) {
    event.preventDefault();
    event.stopPropagation();
    
    const submenu = document.getElementById(submenuId);
    const isOpening = !submenu.classList.contains('active');
    
    // Alternar el submenú clickeado
    submenu.classList.toggle('active');
    
    // Alternar la flecha
    const icon = linkElement.querySelector('svg');
    if (icon) {
        icon.classList.toggle('rotate-180');
    }
}

// Función para expandir todos los menús y submenús
 function expandAllMenus() {
    // Expandir todos los submenús principales
    document.querySelectorAll('.menu-item > .submenu').forEach(menu => {
        menu.classList.add('active');
        const parentLink = menu.previousElementSibling;
        if (parentLink && parentLink.querySelector('svg')) {
            parentLink.querySelector('svg').classList.add('rotate-180');
        }
    });
    
    // Expandir todos los submenús dentro de módulos
    document.querySelectorAll('#modulos-submenu .submenu').forEach(menu => {
        menu.classList.add('active');
        const parentLink = menu.previousElementSibling;
        if (parentLink && parentLink.querySelector('svg')) {
            parentLink.querySelector('svg').classList.add('rotate-180');
        }
    });
}

function setActiveMenu() {
    const currentPath = window.location.pathname.split('/').pop();
    
    document.querySelectorAll('.nav-link[href]').forEach(link => {
        const linkPath = link.getAttribute('href').split('/').pop();
        if (linkPath === currentPath) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });
}

// Al cargar la página
document.addEventListener('DOMContentLoaded', function() {
//    expandAllMenus(); // Expandir todos los menús al cargar
    setActiveMenu();  // Marcar el menú activo
});
	document.getElementById("devClearBtn").onclick = function() {
		localStorage.clear(); // Borra todo el localStorage
		alert("LocalStorage limpiado ✅");
	};
</script>
</body>
</html>